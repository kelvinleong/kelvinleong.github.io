<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kelvin</title>
    <description>Long Form Jekyll theme built with SASS / COMPASS / SUSY</description>
    <link>http://kelvinleong.github.io/kelvinleong/</link>
    <atom:link href="http://kelvinleong.github.io/kelvinleong/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 02 Feb 2016 22:53:25 +0800</pubDate>
    <lastBuildDate>Tue, 02 Feb 2016 22:53:25 +0800</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      
      <item>
        <title>Multithreading in Java</title>
        <description>&lt;p&gt;&lt;em&gt;This passage is to demonstrate the usage of thread and some concrete examples in practice.&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Threads allow multiple activities to proceed concurrently. Concurrent programming is harder than single-threaded programming, because more things can go wrong, and failures can be hard to reproduce. But you canâ€™t avoid concurrency. It is inherent in much of what we do, and a requirement if you are to obtain good performance from multicore processors, which are now commonplace. This chapter contains advice to help you write clear, correct, well-documented concurrent programs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This is the preface copied from &amp;quot;Effective Java&amp;quot;, of course, concurrent programming is somehow a nightmare for developer particularly when production issues occur. Multithreading is known as notoriously hard to debug and reproduce the error. But as stated, multithreading empower the performance by making good use of multicore processors. Therefore, it&amp;#39;s inevitable for a programmer to take the challenges on multithreading programming.&lt;/p&gt;

&lt;h3 id=&quot;how-to-create-a-thread-in-java&quot;&gt;How to create a thread in Java?&lt;/h3&gt;

&lt;p&gt;Basically, there are two ways to create threads in Java programming. One is to &amp;quot;implement Runnable&amp;quot; and the other is to &amp;quot;extends Thread&amp;quot;.&lt;/p&gt;

&lt;p&gt;With implements Runnable:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ThreadB&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//Code&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Started with a &amp;quot;new Thread(threadB).start()&amp;quot; call&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or, with extends Thread:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ThreadA&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ThreadA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ThreadA&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//Code&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Started with a &amp;quot;threadA.start()&amp;quot; call&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This hierarchy can be shown in the following diagram.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/multithreading/thread-runnable-erp.png&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;

&lt;p&gt;As shown in the code example, both two methods actually embed the thread body in run() method but the semantic difference is that ThreadB implement the interface run() of Runnable while ThreadA override the method in Thread object. In practice, creating thread using ThreadA is straightforward for beginner to go but ThreadB is actually the preferred method to create a thread. The reason is that &lt;strong&gt;&lt;em&gt;&amp;quot;implements Runnable&amp;quot;&lt;/em&gt;&lt;/strong&gt; is more flexible as multi inheritance is not supported in Java. Say, you want to customize a timer control to update the time every 2 seconds by extending an implemented timer class. By this way, you cannot use &amp;quot;extend Thread&amp;quot; method due to the single inheritance restrict in Java.Instead, you can only make the timer to &lt;strong&gt;&lt;em&gt;&amp;quot;implements Runnable&amp;quot;&lt;/em&gt;&lt;/strong&gt; and override the run() method to specialize the thread&amp;#39;s behavior.&lt;/p&gt;

&lt;h3 id=&quot;start-a-thread&quot;&gt;Start a thread&lt;/h3&gt;

&lt;p&gt;Thread should be started by invoking the native method start() to begin execution.The Java Virtual Machine then calls the run method of this thread to go.Directly invoking the run() method from main thread, the run() method goes onto the current call stack rather than at the beginning of a new call stack i.e., run() will serve as a function call instead by direct invoking.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;start()&lt;/strong&gt; method of Thread class is used to start a newly created thread. It performs following tasks:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A new thread starts(with new callstack).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The thread moves from New state to the Runnable state.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;When the thread gets a chance to execute, its target run() method will run.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To further understand the pitfall, read the following passage.
&lt;a href=&quot;http://tutorials.jenkov.com/java-concurrency/creating-and-starting-threads.html#common-pitfall&quot;&gt;http://tutorials.jenkov.com/java-concurrency/creating-and-starting-threads.html#common-pitfall&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;data-concurrency&quot;&gt;Data concurrency&lt;/h3&gt;

&lt;p&gt;Synchronization in java is the capability to control the access of multiple threads to any shared resource.&lt;/p&gt;

&lt;p&gt;Java Synchronization is better option where we want to allow only one thread to access the shared resource.&lt;/p&gt;

&lt;p&gt;Syntax to use synchronized method:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;someMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reference&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;   
    &lt;span class=&quot;c1&quot;&gt;//code block   &lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With the &lt;strong&gt;&lt;em&gt;synchronized&lt;/em&gt;&lt;/strong&gt; keyword, it can be guaranteed that only one thread can access method &amp;quot;someMethod()&amp;quot; which is to lock an object for any shared resources. But there is performance tradeoff by simply using synchronized keyword. Suppose you have 50 lines of code in your method, but you want to synchronize only 5 lines. Therefore, synchronized block is an alternative to solve the problem.&lt;/p&gt;

&lt;p&gt;Syntax to use synchronized block&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reference&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;   
  &lt;span class=&quot;c1&quot;&gt;//code block   &lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Actually, the synchronized method is equivalent to the following code snippet:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;someMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reference&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;//code block   &lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For further details read the following:
&lt;a href=&quot;http://www.javatpoint.com/synchronization-in-java&quot;&gt;http://www.javatpoint.com/synchronization-in-java&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;inter-thread-communication&quot;&gt;Inter-Thread Communication&lt;/h3&gt;

&lt;p&gt;Inter-thread communication is important in multithreading programming. Let&amp;#39;s say there is a scenario that ThreadA is waiting for ThreadB completing its execution to continue its job. One of the solution is to create a status tracker which allows one or more threads to wait until a set of operations being performed in other threads completes.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StatusTracker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;PENDING&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;COMPLETED&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;       

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ConcurrentMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CountDownLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
                            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ConcurrentHashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CountDownLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;await&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

            &lt;span class=&quot;n&quot;&gt;CountDownLatch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;await&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CountDownLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;await&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;CountDownLatch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signalLatchMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;signalLatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;countDown&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By invoking &lt;strong&gt;&lt;em&gt;await(STATUS.COMPLETED)&lt;/em&gt;&lt;/strong&gt; in ThreadA, it will release the lock and wait for the notification invoked by &lt;strong&gt;&lt;em&gt;signal(STATUS.COMPLETED)&lt;/em&gt;&lt;/strong&gt; in ThreadB.&lt;/p&gt;

&lt;p&gt;For the further leanring of CountDownLatch, read:
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1037.htm#i1576022&quot;&gt;https://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1037.htm#i1576022&lt;/a&gt;
&lt;a href=&quot;http://www.javatpoint.com/multithreading-in-java&quot;&gt;http://www.javatpoint.com/multithreading-in-java&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;p&gt;&lt;em&gt;This passage is to demonstrate the usage of thread and some concrete examples in practice.&lt;/em&gt;&lt;/p&gt;
</description>
        
        <pubDate>Thu, 24 Dec 2015 22:27:00 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/Multithreading-in-java/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/Multithreading-in-java/</guid>
        
        
        <category>multithreading</category>
        
      </item>
      
    
      
      <item>
        <title>Find tables that reference a particular column in a table </title>
        <description>&lt;p&gt;Scenario: &lt;em&gt;An requirement states &amp;quot;to delete the data from a table which is referenced by different tables&amp;quot;.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Well, to delete records in Oracle Database is believed to be an simple job by the following command &lt;em&gt;&amp;quot;Delete FROM table_name&amp;quot;&lt;/em&gt;. But the prerequisite is that the table should not be referenced by any other tables otherwise it may cause the &amp;quot;foreign key violation&amp;quot; while trying to delete the table.&lt;/p&gt;

&lt;p&gt;Before that, we should have an explicit view on how the reference constraints is maintained in Oracle. The key system table is &lt;strong&gt;&lt;em&gt;ALL_CONSTRAINTS&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ALL_CONSTRAINTS&lt;/strong&gt; describes constraint definitions on tables accessible to the current user.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align: left&quot;&gt;Column&lt;/th&gt;
&lt;th style=&quot;text-align: left&quot;&gt;Descriptions&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: left&quot;&gt;CONSTRAINT_TYPE&lt;/td&gt;
&lt;td style=&quot;text-align: left&quot;&gt;&lt;ul&gt;&lt;li&gt;C (check constraint on a table)&lt;/li&gt;&lt;li&gt;P (primary key)&lt;/li&gt;&lt;li&gt;U (unique key)&lt;/li&gt;&lt;li&gt;R (referential integrity)&lt;/li&gt;&lt;li&gt;V (with check option, on a view)&lt;/li&gt;&lt;li&gt;O (with read only, on a view)&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: left&quot;&gt;R_CONSTRAINT_NAME&lt;/td&gt;
&lt;td style=&quot;text-align: left&quot;&gt;Name of the unique constraint definition for referenced table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: left&quot;&gt;CONSTRAINT_NAME&lt;/td&gt;
&lt;td style=&quot;text-align: left&quot;&gt;Name of the constraint definition&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;There is a hierarchical structure in this table that &lt;em&gt;R_CONSTRAINT_NAME&lt;/em&gt; indicating the foreign key constraint of the table would be the &lt;em&gt;CONSTRAINT_NAME&lt;/em&gt; of a table it refers to (note, foreign key must refer to a primary key). By this relationship, we can create a hierarchical query to find out the table name, primary constraint name and its referenced tables name and the foreign key constraint name.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;CONSTRAINT_TYPE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;R_CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;k&quot;&gt;LEVEL&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LVL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ALL_CONSTRAINTS&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;START&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;szTableName&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONSTRAINT_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;P&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;CONNECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIOR&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R_CONSTRAINT_NAME&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To further find out the corresponding primary and foreign key columns, we can use the above result to join with table &lt;strong&gt;&lt;em&gt;ALL_IND_COLUMNS&lt;/em&gt;&lt;/strong&gt; and &lt;strong&gt;&lt;em&gt;ALL_CONS_COLUMNS&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;COLUMN_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;COLUMN_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;TREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;TREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;TREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LVL&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;ALL_IND_COLUMNS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;ALL_CONS_COLUMNS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONSTRAINT_TYPE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R_CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LEVEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LVL&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ALL_CONSTRAINTS&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;START&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;szTableName&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONSTRAINT_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;P&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;CONNECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIOR&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R_CONSTRAINT_NAME&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Tree&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONSTRAINT_NAME&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INDEX_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R_CONSTRAINT_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As shown, the hierarchical query result is nested as a Tree table for join operation.&lt;/p&gt;

&lt;p&gt;I find another slow solution from the other, it&amp;#39;s easy to understand but with less efficiency as too many join operations to perform for getting the result.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Table_Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;--Source&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Column_Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;--Source&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Table_Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;--Ref&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Column_Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;--Ref&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Constraint_Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;--Source&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R_Constraint_Name&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;--Ref&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;All_Constraints&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;All_Cons_Columns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;All_Ind_Columns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;Constraint_Name&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;All_Constraints&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;Table_Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UPPER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;szTableName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Constraint_Type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;P&amp;#39;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TMP&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Constraint_Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Constraint_Name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Table_Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Table_Name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R_Constraint_Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Index_Name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R_Constraint_Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TMP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Constraint_Name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;AC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Constraint_Type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;R&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;ACC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Column_Position&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But these two solutions are buggy if there is &lt;strong&gt;self referential constraint&lt;/strong&gt; among those tables. Therefore, make sure there is no tables has foreign keys refer to itself or using &lt;strong&gt;&lt;em&gt;&amp;quot;ON DELETE CASCADE&lt;/em&gt;&lt;/strong&gt; to avoid the problem.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1037.htm#i1576022&quot;&gt;https://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1037.htm#i1576022&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;p&gt;Scenario: &lt;em&gt;An requirement states &amp;quot;to delete the data from a table which is referenced by different tables&amp;quot;.&lt;/em&gt;&lt;/p&gt;
</description>
        
        <pubDate>Mon, 30 Nov 2015 23:53:00 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/Find-Referenced-Tables/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/Find-Referenced-Tables/</guid>
        
        
        <category>oracle</category>
        
      </item>
      
    
      
      <item>
        <title>Monitor the application in JVisualVm</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate how to monitor the application with the help of JVisualVm&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I am developing a JavaFx test tool for back-end server APIs validity checking. In practice, I found the application is easy to hang after running for a while. Therefore, I use the JVisualVm to monitor the application and find out what&amp;#39;s going wrong there.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s go more details.&lt;/p&gt;

&lt;h4 id=&quot;1-how-to-install-jvisualvm&quot;&gt;1. How to Install JVisualVM ?&lt;/h4&gt;

&lt;p&gt;JVisualVm is a standard part of Sun&amp;#39;s JDK distribution since JDK 6 Update. To begin the tour following &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/intro.html&quot;&gt;this link&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;2-to-monitor-your-application&quot;&gt;2. To monitor your application&lt;/h4&gt;

&lt;p&gt;It&amp;#39;s convenient to use JVisualVM to monitor your application. Just click the application&amp;#39;s name on the &amp;quot;Applications&amp;quot; list view on the left. You can see the CPU/Heap/Classes/Threads usage diagrams by clicking the &amp;quot;Monitor&amp;quot; tab for further exploration.
&lt;img src=&quot;/resources/jvisualvm/monitor.PNG&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;

&lt;p&gt;By monitoring the threads, I found a big problem that every time I open one of the UI, which is for history review, it creates a new thread and after closing the UI, the tread still keeps alive and never exit (as shown in the following figure). That would cause a MOM disaster if the ui is frequently in use.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/jvisualvm/thread-trace.jpg&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;

&lt;p&gt;So, I check carefully in the source of the UI, I found a thread is always created to read the data from a blocking queue periodically during initialization of the UI. But the problem is the thread is embedded with a while(true) loop which will never exit so that even its parent UI died, the thread will not be killed but continue the dead loop. Therefore, I use a poison pill to message the thread to stop.Concretely, that is by changing the &amp;quot;poison pill&amp;quot; (a default true volatile boolean value) to false while on close method of the UI is invoked thus the thread will terminate itself by leaving the dead loop (refer to the following sampe codes). Then I assign a name to the thread and trace it in JVisualVm. As expected, the thread exit after I close the UI (see the following figure), thus solving the problem!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;   &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                   &lt;span class=&quot;c1&quot;&gt;//Do something there&lt;/span&gt;
           &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/resources/jvisualvm/thread-trace-1.jpg&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://www.javaworld.com/article/2072322/from-jconsole-to-visualvm.html&quot;&gt;http://www.javaworld.com/article/2072322/from-jconsole-to-visualvm.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate how to monitor the application with the help of JVisualVm&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
        <pubDate>Mon, 30 Nov 2015 23:53:00 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/Find-All-Referenced-Tables/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/Find-All-Referenced-Tables/</guid>
        
        
        <category>jvm</category>
        
      </item>
      
    
      
      <item>
        <title>Java Garbage Collection</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate and explore the mechanism of Garbage Collection&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Garbage collection is a big topic for Java programmer and it always occurs in the interview (I was challenged several times) ! So in this passage, I will try to illustrate how Garbage Collection works with the Hotspot JVM.&lt;/p&gt;

&lt;p&gt;Java&amp;#39;s automatic garbage collection nicely frees programmers from worrying about memory management. Think about C++ programming, every time you new something, you have to cater for the delete appropriately. However, in java, you just new an object as you want without concerning to free them at all. But the convenience is not free and exactly JVM is responsible to collect the unreferenced objects(or so called &amp;quot;garbage&amp;quot;). That&amp;#39;s why the interviewer like to challenge interviewee on this topic.&lt;/p&gt;

&lt;p&gt;First, how does Garbage Collection works?&lt;/p&gt;

&lt;p&gt;Java implements something called a generational garbage collector based upon the generational hypothesis assumption, which states that &lt;strong&gt;&lt;em&gt;the majority of objects that are created are quickly discarded&lt;/em&gt;&lt;/strong&gt;, and objects that are not quickly collected are likely to be around for a while.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s have a look at the structure of Hotspot heap&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/Slide5.PNG&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;

&lt;p&gt;As you can see from the diagram, the heap is divided into 3 parts, young , tenured and permanent generation respectively.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The Young Generation is where all new objects are allocated and aged. When the young generation fills up, this causes a minor garbage collection. Minor collections can be optimized assuming a high object mortality rate. A young generation full of dead objects is collected very quickly. Some surviving objects are aged and eventually move to the old generation. More specifically,&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Eden Space - Objects start out here. Most objects are created and destroyed in the Eden Space. Here, the GC does Minors GCs, which are optimized garbage collections. When a Minor GC is performed, any references to objects that are still needed are migrated to one of the survivors spaces (S0 or S1).&lt;/li&gt;
&lt;li&gt;Survivor Space (S0 and S1) - Objects that survive Eden end up here. There are two of these, and only one is in use at any given time (unless we have a serious memory leak). One is designated as empty, and the other as live, alternating with every GC cycle.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The Old Generation is used to store long surviving objects. Typically, a threshold is set for young generation object and when that age is met, the object gets moved to the old generation. Eventually the old generation needs to be collected. This event is called a major garbage collection.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The Permanent generation contains metadata required by the JVM to describe the classes and methods used in the application. The permanent generation is populated by the JVM at runtime based on classes in use by the application. In addition, Java SE library classes and methods may be stored here.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html&quot;&gt;http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.toptal.com/java/hunting-memory-leaks-in-java&quot;&gt;http://www.toptal.com/java/hunting-memory-leaks-in-java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate and explore the mechanism of Garbage Collection&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
        <pubDate>Tue, 10 Nov 2015 23:53:00 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/JVM-Introduction/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/JVM-Introduction/</guid>
        
        
        <category>java</category>
        
      </item>
      
    
      
      <item>
        <title>Explore PDF</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate and explore the popular encoding format &amp;quot;PDF&amp;quot;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Background: I was asked to develop an application to extract a pdf and convert those traditional Chinese to simplified. Sounds easy, ahuh?
At first, I think it&amp;#39;s not that difficult until I really get suck into the &amp;quot;notorious&amp;quot; format...So, to begin with, let&amp;#39;s look at the brief
of what is a PDF.&lt;/p&gt;

&lt;h4 id=&quot;1-what-is-the-pdf&quot;&gt;1. What is the PDF?&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Portable Document Format (PDF) is a file format used to present documents in a manner independent of application software, hardware and operating systems.[2] Each PDF file encapsulates a complete description of a fixed-layout flat document, including the text, fonts, graphics and other information needed to display it. [From &lt;a href=&quot;http://www.wikiwand.com/en/Portable_Document_Format&quot;&gt;WikiPedia&lt;/a&gt;]&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Basically, the PDF is designed as a universal reading format so that the document can be viewed in various kinds of devices. Therefore, it&amp;#39;s not expected to &amp;quot;edit&amp;quot; a pdf document as per the &amp;quot;universal read&amp;quot; design principle. But, if you are ambitious enough (just like me), you would forcibly process a PDF and make some kinds of modification on that with the help of an Apache project &lt;a href=&quot;https://pdfbox.apache.org/&quot;&gt;&amp;quot;PDFBox&amp;quot;&lt;/a&gt; . Fortunately, PDFBox is a powerful lib for processing a pdf document. There are apis for pdf extraction and parse. What&amp;#39;s more, it is open source! So I can even customize the lib to suit for my needs. But I would say it&amp;#39;s a little bit mess of the PDFBox source code, I mean the source code it&amp;#39;s rather in a complicated nature as I read. Well, that will be another post to talk about the PDFBox.&lt;/p&gt;

&lt;p&gt;Since there is no way to overwrite the PDF document, the only way to replace the traditional chinese characters is to re-write the content to a new file with substitution, a &amp;quot;copy-and-replace&amp;quot; solution. It seems that the strategy is reasonable and straightforward. But as you explore more in the PDF structure and its format encoding, you will find it&amp;#39;s a nightmare to simplify the solution as &amp;quot;copy-and-replace&amp;quot;. To sum up, you have to pay if you insist to edit the PDF!!! Then I will talk about the PDF structure.&lt;/p&gt;

&lt;h4 id=&quot;2-pdf-structure&quot;&gt;2. PDF Structure&lt;/h4&gt;

&lt;p&gt;Significantly, a PDF document is composed of 3 key elements images, text and graphics   (symbols/lines/arrows/etc). So if you want completely rewrite the a pdf, you&amp;#39;ll have to extract all the information of those elements and use them to recover in the new file.&lt;/p&gt;

&lt;h5 id=&quot;2-1-text&quot;&gt;2.1 Text&lt;/h5&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Text in PDF is represented by text elements in page content streams. A text element specifies that characters should be drawn at certain positions. The characters are specified using the encoding of a selected font resource.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So to edit a text, you have to deal with two aspects, one is the font and the other is &amp;quot;encoding&amp;quot;. English and ASCII characters are easy to handle in this case as the font and encoding would not be complicated for those characters. But for chinese characters, it&amp;#39;s a catastrophe.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s say I have parsed the text position and get all the information. The first step is to detect what is &amp;quot;character&amp;quot; inside, whether a English letter or chinese character. Fortunately, pdfBox provide api to retrieve the Unicode of that particular character. Assume that a traditional chinese character &amp;quot;æª”&amp;quot; is found and wanna change it to simplified &amp;quot;æ¡£&amp;quot;. Again the nightmare occurs, you will have to specify a font which contains simplified chinese charaset and then put the corresponding Unicode to the font writer and then write it out.&lt;/p&gt;

&lt;h5 id=&quot;2-2-images-amp-symbols&quot;&gt;2.2 Images &amp;amp; symbols&lt;/h5&gt;

&lt;p&gt;The most complicated part would be to process images &amp;amp; symbols as their nature of complication. Unfortunately, the meta-data would hardly retrieved which causing the information loss. Frankly speaking, you&amp;#39;ll have no way to recover the images and symbols in a complete similarity as the previous document. So that&amp;#39;s why I have to give up my continuation of developing the application. It&amp;#39;s in vain to develop such an application that only provide a similar but never the same document in terms of structure.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;References:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://ccckmit.wikidot.com/pdf:streamcoding&quot;&gt;http://ccckmit.wikidot.com/pdf:streamcoding&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This article is to illustrate and explore the popular encoding format &amp;quot;PDF&amp;quot;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
        <pubDate>Tue, 06 Oct 2015 23:53:00 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/PDF-Exploration/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/PDF-Exploration/</guid>
        
        
        <category>pdf</category>
        
      </item>
      
    
      
      <item>
        <title>Hibernate System Exception</title>
        <description>&lt;p&gt;I accidentally encountered the following hibernate system exception after I modified the xml file.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;hibernateSystemException Donâ€™t change the reference to a collection with cascade=â€all-delete-orphanâ€&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The explanation told nothing at all.. So I try google or stackOverflow, none of them provided a practical solution for me.&lt;/p&gt;

&lt;p&gt;Finally, I examined my xml carefully again and again, then suddenly I realize that one of the bean name is reused again.&lt;/p&gt;

&lt;p&gt;After I corrrect it, the exception disappared!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;tradingAccCredit&amp;quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;com.cmms.sharedlib.ControlGroup&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;controls&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;util:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;com.cmms.sharedlib.ClientMaint&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;tradingLimitCM&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;expDtOfTradeLimitCM&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;tradingLoanLimitCM&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// The bean name is used previously in another xml&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;expDtOfLoanLimitCM&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;creditRatingCM&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;util:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;userRoles&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;util:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;com.cmms.sharedlib.ControlUserRole&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;mo_editMode&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ref&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;mom_editMode&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;util:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To sum up, make sure the bean names are unique.&lt;/p&gt;
</description>
        
          <description>&lt;p&gt;I accidentally encountered the following hibernate system exception after I modified the xml file.&lt;/p&gt;
</description>
        
        <pubDate>Wed, 16 Sep 2015 04:24:58 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/hibernate-system-exception/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/hibernate-system-exception/</guid>
        
        
        <category>java</category>
        
      </item>
      
    
      
      <item>
        <title>ç»†è¯´å­—ç¬¦é›†(CharSet)å’Œå­—ç¬¦ç¼–ç (Encoding)</title>
        <description>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;æœ¬æ–‡å°†é˜è¿°å­—ç¬¦é›†ï¼ˆCharSetï¼‰ã€å­—ç¬¦ç¼–ç (Encoding)ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠæµ…è°ˆé›†ä¸­å¸¸ç”¨çš„ä¸­æ–‡å­—ç¬¦é›†å’Œç¼–ç &lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¦‚è¿°ï¼š ä¸­æ–‡çš„ä¹±ç çŽ°è±¡ï¼Œä»¥åŠç¹ç®€ä¸­æ–‡çš„ä¹±ç çŽ°è±¡åœ¨ä»¥ä¸­æ–‡ä¸»å¯¼çš„åœ°åŒºæ—¶æœ‰å‘ç”Ÿï¼Œè€Œè§£å†³ä¹±ç çš„æ ¹æœ¬ï¼Œå°±å¿…é¡»è¦æ˜Žç™½ç”µè„‘æ˜¯
åˆ°åº•æ˜¯å¦‚ä½•å­˜æ”¾å’Œç¼–æŽ’æˆ‘ä»¬æ—¥å¸¸æ‰€è§çš„å­—ç¬¦ï¼Œæœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨ï¼Œå¹¶å¯¹æœ‰å…³çš„åè¯ç»™äºˆæ·±å…¥çš„è§£é‡Šï¼Œå¸Œæœ›ä¹‹åŽå†é‡åˆ°æœ‰å…³çš„ç¼–ç çš„é—®é¢˜ï¼Œ
èƒ½å¤Ÿæ¸¸åˆƒæœ‰ä½™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h4 id=&quot;1-ä»€ä¹ˆæ˜¯å­—ç¬¦é›†ï¼ˆcharsetï¼‰ï¼Ÿ&quot;&gt;1. ä»€ä¹ˆæ˜¯å­—ç¬¦é›†ï¼ˆCharSetï¼‰ï¼Ÿ&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;charset is the set of characters you can use&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨è‹±æ–‡èµ„æ–™ä¸­ï¼Œä¸Žå­—ç¬¦é›†ï¼ˆCharSetï¼‰å¯ä»¥åŒæ„çš„è¯æ±‡æœ‰ &lt;strong&gt;&lt;em&gt;character set, character map, codeset or code page&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç®€å•è®²ï¼Œå­—ç¬¦é›†å°±æ˜¯æŸä¸€ç±»å­—ç¬¦çš„é›†åˆã€‚æ¯”å¦‚è¯´å¸¸ç”¨çš„è‹±æ–‡å­—æ¯å’Œç¬¦å·éƒ½åŒ…å«åœ¨&lt;a href=&quot;http://www.asciitable.com&quot;&gt;ASCII&lt;/a&gt;è¿™ä¸ªå­—ç¬¦é›†ä¸­ã€‚
å†ä¾‹å¦‚ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç®€ä½“å’Œç¹ä½“æ±‰å­—ï¼Œå…¶å®žéƒ½æœ‰å„è‡ªçš„å­—ç¬¦é›†ï¼Œç®€ä½“æ±‰å­—çš„å¸¸ç”¨å­—ç¬¦é›†æœ‰ä»¥ä¸‹å‡ ç§ï¼ŒGB2312ï¼GB 13000ï¼GBKï¼GB18030ã€‚
åŒç†ï¼Œç¹ä½“å­—å­—ç¬¦é›†Big5åŒ…å«äº†å¸¸ç”¨çš„ç¹ä½“å­—ã€‚æ¦‚æ‹¬çš„è¯´ï¼Œå­—ç¬¦é›†è§„å®šäº†æŸç±»å­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶æ•°å€¼å­˜æ”¾æ–¹å¼ï¼ˆç¼–ç ï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å€¼
åœ¨æŸç§å­—ç¬¦é›†ä¸­å¯»æ‰¾å‡ºå¯¹åº”ä»£è¡¨çš„å­—ç¬¦å°±æ˜¯è§£ç çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸šç•Œæœ‰å¦‚æ­¤å¤šçš„å­—ç¬¦é›†ï¼Œè¯¸å¦‚UTF-8/UTF-16/Unicodeç­‰å„å¼å„æ ·çš„å­—ç¬¦é›†å‘¢ï¼Ÿå¾ˆæ˜Žæ˜¾ï¼Œå­—ç¬¦é›†çš„äº§ç”Ÿæ˜¯éš
ç€è®¡ç®—æœºä¸æ–­å‘å±•å£®å¤§å¸¦æ¥çš„é—®é¢˜ï¼Œé¦–å…ˆå½“æ—¶å­—ç¬¦é›†æ ‡å‡†çš„åˆ¶å®šè€…æ²¡æœ‰æ„è¯†åˆ°è¦å»ºç«‹ä¸€ç§æ ‡å‡†é€šç”¨çš„å‡†åˆ™ï¼Œç‰¹åˆ«æ˜¯å½“åˆè®¡ç®—æœºåªåœ¨è‹±æ–‡å’Œæ¬§æ´²è¯­ç³»
çš„å›½å®¶æµè¡Œï¼ˆç›¸å¯¹æ¥è¯´ï¼Œè‹±æ–‡å’Œæ‹‰ä¸å­—æ¯æ•°é‡å°‘ï¼Œç¼–ç å®¹æ˜“ï¼‰ã€‚ç„¶è€Œä»–ä»¬æ²¡æœ‰æ„è¯†åˆ°ï¼Œéšç€ç§‘æŠ€å‘å±•ï¼Œç”µè„‘å·²ç»æ·±å…¥åˆ°å„ä¸ªå›½å®¶å’Œæ°‘æ—å½“ä¸­ï¼Œè‡ªç„¶
æ¯ä¸ªæ°‘æ—éƒ½å¸Œæœ›è‡ªå·±çš„è¯­è¨€èƒ½è¢«ç”µè„‘è¯†åˆ«ï¼Œå› ä¸ºå„ä¸ªå›½å®¶è¯­è¨€çš„å­—ç¬¦é›†éƒ½ç›¸ç»§æŽ¨å‡ºï¼Œè¿™ä¹Ÿå¯¼è‡´å­—ç¬¦é›†ä¸æ–­å£®å¤§ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œå¯å¦åˆ¶å®šä¸€ä¸ªé€šç”¨ç¼–ç 
åŽŸåˆ™ï¼Œè®©æ¯ä¸ªåŽæ¥åˆ›å»ºçš„å­—ç¬¦é›†æŒ‰ç…§åˆ¶å®šçš„æ–¹å¼æ¥ç¼–ç ï¼Œè¿™æ ·ä¸å°±è§£å†³äº†ä¸ç»Ÿä¸€çš„é—®é¢˜äº†å—ï¼Ÿäº‹å®žä¸Šï¼Œ
&lt;emcode&gt;Unicode&lt;/emcode&gt;å°±æ˜¯ç§æƒ³æ³•çš„å®žè·µè€…ï¼Œå®ƒå¯¹ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—ç³»ç»Ÿè¿›è¡Œäº†æ•´ç†ã€ç¼–ç ï¼Œä½¿å¾—ç”µè„‘å¯ä»¥ç”¨æ›´ä¸ºç®€å•çš„æ–¹å¼æ¥å‘ˆçŽ°å’Œ
å¤„ç†æ–‡å­—ï¼Œè¿™æ ·åªè¦ç”µè„‘é¢„å…ˆè£…è½½å¥½unicodeçš„å­—ç¬¦é›†ï¼Œå°±ä¸ç”¨ç‰¹åœ°å†å®‰è£…ç®€ä½“å­—ç¬¦é›†ä¹Ÿå¯ä»¥åœ¨ä»»ä½•ç”µè„‘ä¸Šæ˜¾ç¤ºå‡ºç®€ä½“æ±‰å­—ã€‚
ä¾‹å¦‚&lt;emcode&gt;æ¬¢&lt;/emcode&gt;ï¼Œä»¥ä¸‹æ˜¯å…¶åœ¨ç®€ä½“å­—ç¬¦é›†å’ŒUnicodeå­—ç¬¦é›†ä¸­çš„ç¼–ç ã€‚&lt;/p&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align: center&quot;&gt;å­—ç¬¦é›†&lt;/th&gt;
&lt;th style=&quot;text-align: center&quot;&gt;(&amp;quot;æ¬¢&amp;quot;)ç¼–ç å€¼Hex Value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: center&quot;&gt;GBK&lt;/td&gt;
&lt;td style=&quot;text-align: center&quot;&gt;0xBB66&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: center&quot;&gt;Unicode&lt;/td&gt;
&lt;td style=&quot;text-align: center&quot;&gt;0x6B22&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;hr&gt;

&lt;h4 id=&quot;2-ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼ˆencodingï¼‰&quot;&gt;2. ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼ˆEncodingï¼‰?&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;encoding is the way these characters are stored into memory&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯»åˆ°è¿™é‡Œï¼Œå¤§å®¶åº”è¯¥æœ‰ä¸ªå°è±¡ï¼Œå­—ç¬¦é›†æ˜¯æŸä¸€ç§å­—ç¬¦çš„é›†åˆï¼Œè¦æ‰¾åˆ°æŸä¸ªå­—ç¬¦ï¼Œé‚£é¦–å…ˆå°±åº”è¯¥æ‰¾åˆ°æ”¹å­—ç¬¦æ‰€åœ¨çš„å­—ç¬¦é›†ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±åº”è¯¥æ˜¯å¦‚ä½•ä»Ž
å­—ç¬¦é›†æ‰¾å‡ºå¯¹åº”çš„å­—ç¬¦äº†ã€‚&lt;/p&gt;

&lt;p&gt;äº‹å®žä¸Šï¼Œè¦ä»Žä¸€ä¸ªå­—ç¬¦é›†æ­£ç¡®ç¼–ç è½¬ç ä¸€ä¸ªå­—ç¬¦éœ€è¦ä¸‰ä¸ªå…³é”®å…ƒç´ ï¼šå­—åº“è¡¨ï¼ˆcharacter repertoireï¼‰ã€ç¼–ç å­—ç¬¦é›†ï¼ˆcoded character setï¼‰ã€
å­—ç¬¦ç¼–ç ï¼ˆcharacter encoding formï¼‰ã€‚å…¶ä¸­å­—åº“è¡¨æ˜¯ä¸€ä¸ªç›¸å½“äºŽæ‰€æœ‰å¯è¯»æˆ–è€…å¯æ˜¾ç¤ºå­—ç¬¦çš„æ•°æ®åº“ï¼Œ
å­—åº“è¡¨å†³å®šäº†æ•´ä¸ªå­—ç¬¦é›†èƒ½å¤Ÿå±•çŽ°è¡¨ç¤ºçš„æ‰€æœ‰å­—ç¬¦çš„èŒƒå›´ã€‚ç¼–ç å­—ç¬¦é›†(coded character set)ï¼Œå³ç”¨ä¸€ä¸ªç¼–ç å€¼&lt;emcode&gt;code point&lt;/emcode&gt;æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦åœ¨å­—åº“ä¸­çš„ä½ç½®ã€‚å­—ç¬¦ç¼–ç ï¼Œ
å°†ç¼–ç å­—ç¬¦é›†å’Œå®žé™…å­˜å‚¨æ•°å€¼ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚ä¸€èˆ¬æ¥è¯´éƒ½ä¼šç›´æŽ¥å°†code pointçš„å€¼ä½œä¸ºç¼–ç åŽçš„å€¼ç›´æŽ¥å­˜å‚¨ã€‚ä¾‹å¦‚åœ¨ASCIIä¸­Aåœ¨è¡¨ä¸­æŽ’ç¬¬65ä½ï¼Œ
è€Œç¼–ç åŽAçš„æ•°å€¼æ˜¯0100 0001ä¹Ÿå³åè¿›åˆ¶çš„65çš„äºŒè¿›åˆ¶è½¬æ¢ç»“æžœã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡é—®é¢˜å°±æ¥ï¼Œä»Žä¸Šæ–‡å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®žåªéœ€è¦&lt;emcode&gt;å­—åº“è¡¨&lt;/emcode&gt;å’Œ&lt;emcode&gt;ç¼–ç å­—ç¬¦é›†&lt;/emcode&gt;å°±è¶³å¤Ÿæ­£ç¡®ç¼–ç è§£ç ä¸€ä¸ªå­—ç¬¦äº†ï¼Œä¸ºä½•è¦å¤šæ­¤ä¸€ä¸¾å¼•å…¥
å­—ç¬¦ç¼–ç ï¼ˆEncodingï¼‰å‘¢ï¼Ÿå„ç§çš„åŽŸå› ä¸»è¦æ˜¯è¦è€ƒè™‘åˆ°ï¼Œå¦‚æžœè®©å…¨çƒå„å›½ç»Ÿä¸€çš„ä½¿ç”¨å­—ç¬¦æ ‡å’Œç¼–ç å­—ç¬¦é›†æ¥ä¸ºå…¶å›½å®¶çš„è¯­è¨€æ–‡å­—è¿›è¡Œç¼–ç ï¼Œä¼šæ¥ä¸€å®šçš„æ•°æ®å†—ä½™ï¼Œä»Ž
ä¸Šæ–‡çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‰ç…§è¯¥æ–¹å¼å­˜å‚¨æ–‡å­—ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½éœ€è¦3ä¸ªbytesæ¥å­˜å‚¨ï¼Œè¿™å¯¹å¤æ‚è¯­è¨€æ¥è¯´å¯èƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºŽè‹±æ–‡æ¥è¯´ï¼Œæœ¬æ¥1ä¸ªå­—èŠ‚å°±èƒ½å­˜çš„ä¸œè¥¿ï¼ŒçŽ°åœ¨
è¦ç”¨3ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œè‡ªç„¶æ˜¯æ˜¯å¸¦æ¥æ•°æ®çš„å†—ä½™ï¼Œå› æ­¤å­—ç¬¦ç¼–ç çš„å¼•è¿›å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®å­˜å‚¨å­—ç¬¦ï¼Œåˆèƒ½èŠ‚çœè¯¥å­—ç¬¦åœ¨å†…å­˜å ç”¨ç©ºé—´ã€‚&lt;/p&gt;

&lt;hr&gt;

&lt;h4 id=&quot;3-utf-8å’Œunicodeçš„å…³ç³»&quot;&gt;3. UTF-8å’ŒUnicodeçš„å…³ç³»?&lt;/h4&gt;

&lt;p&gt;çœ‹å®Œä¸Šé¢ä¸¤ä¸ªæ¦‚å¿µè§£é‡Šï¼Œé‚£ä¹ˆè§£é‡ŠUTF-8å’ŒUnicodeçš„å…³ç³»å°±æ¯”è¾ƒç®€å•äº†ã€‚Unicodeå°±æ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„ç¼–ç å­—ç¬¦é›†ï¼Œè€ŒUTF-8å°±æ˜¯å­—ç¬¦ç¼–ç ï¼Œå³Unicodeè§„åˆ™å­—åº“çš„ä¸€ç§å®žçŽ°å½¢å¼ã€‚éšç€äº’è”ç½‘çš„å‘å±•ï¼Œå¯¹åŒä¸€å­—åº“é›†çš„è¦æ±‚è¶Šæ¥è¶Šè¿«åˆ‡ï¼ŒUnicodeæ ‡å‡†ä¹Ÿå°±è‡ªç„¶è€Œç„¶çš„å‡ºçŽ°ã€‚å®ƒå‡ ä¹Žæ¶µç›–äº†å„ä¸ªå›½å®¶è¯­è¨€å¯èƒ½å‡ºçŽ°çš„ç¬¦å·å’Œæ–‡å­—ï¼Œå¹¶å°†ä¸ºä»–ä»¬ç¼–å·ã€‚è¯¦è§ï¼šUnicode on Wikipediaã€‚Unicodeçš„ç¼–å·ä»Ž0000å¼€å§‹ä¸€ç›´åˆ°10FFFFå…±åˆ†ä¸º16ä¸ªPlaneï¼Œæ¯ä¸ªPlaneä¸­æœ‰65536ä¸ªå­—ç¬¦ã€‚è€ŒUTF-8åˆ™åªå®žçŽ°äº†ç¬¬ä¸€ä¸ªPlaneï¼Œå¯è§UTF-8è™½ç„¶æ˜¯ä¸€ä¸ªå½“ä»ŠæŽ¥å—åº¦æœ€å¹¿çš„å­—ç¬¦é›†ç¼–ç ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰æ¶µç›–æ•´ä¸ªUnicodeçš„å­—åº“ã€‚&lt;/p&gt;

&lt;h4 id=&quot;4-utf8ç¼–ç &quot;&gt;4.UTF8ç¼–ç &lt;/h4&gt;

&lt;p&gt;ä¸Šä¸€èŠ‚å·²ç»ä»‹ç»äº†æœ‰å…³utf-8çš„ç¼–ç çŸ¥è¯†ï¼Œä¸‹é¢å…·ä½“è§£é‡Šä¸‹ï¼Œåˆ°åº•ä»€ä¹ˆUTF-8ç¼–ç ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;UTF-8ç¼–ç ä¸ºå˜é•¿ç¼–ç ã€‚æœ€å°ç¼–ç å•ä½ï¼ˆcode unitï¼‰ä¸ºä¸€ä¸ªå­—èŠ‚ã€‚ä¸€ä¸ªå­—èŠ‚çš„å‰1-3ä¸ªbitä¸ºæè¿°æ€§éƒ¨åˆ†ï¼ŒåŽé¢ä¸ºå®žé™…åºå·éƒ¨åˆ†ã€‚&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;li&gt;&lt;em&gt;å¦‚æžœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½ä¸º 0ï¼Œé‚£ä¹ˆä»£è¡¨å½“å‰å­—ç¬¦ä¸ºå•å­—èŠ‚å­—ç¬¦ï¼Œå ç”¨ä¸€ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚0ä¹‹åŽçš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆ7ä¸ªbitï¼‰ä»£è¡¨åœ¨Unicodeä¸­çš„åºå·ã€‚&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;å¦‚æžœä¸€ä¸ªå­—èŠ‚ä»¥110å¼€å¤´ï¼Œé‚£ä¹ˆä»£è¡¨å½“å‰å­—ç¬¦ä¸ºåŒå­—èŠ‚å­—ç¬¦ï¼Œå ç”¨2ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚110ä¹‹åŽçš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆ5ä¸ªbitï¼‰åŠ ä¸ŠåŽä¸€ä¸ªå­—èŠ‚çš„é™¤10å¤–çš„éƒ¨åˆ†ï¼ˆ6ä¸ªbitï¼‰ä»£è¡¨åœ¨Unicodeä¸­çš„åºå·ã€‚ä¸”ç¬¬äºŒä¸ªå­—èŠ‚ä»¥10å¼€å¤´&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;å¦‚æžœä¸€ä¸ªå­—èŠ‚ä»¥1110å¼€å¤´ï¼Œé‚£ä¹ˆä»£è¡¨å½“å‰å­—ç¬¦ä¸ºä¸‰å­—èŠ‚å­—ç¬¦ï¼Œå ç”¨2ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚110ä¹‹åŽçš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆ5ä¸ªbitï¼‰åŠ ä¸ŠåŽä¸¤ä¸ªå­—èŠ‚çš„é™¤10å¤–çš„éƒ¨åˆ†ï¼ˆ12ä¸ªbitï¼‰ä»£è¡¨åœ¨Unicodeä¸­çš„åºå·ã€‚ä¸”ç¬¬äºŒã€ç¬¬ä¸‰ä¸ªå­—èŠ‚ä»¥10å¼€å¤´&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;å¦‚æžœä¸€ä¸ªå­—èŠ‚ä»¥10å¼€å¤´ï¼Œé‚£ä¹ˆä»£è¡¨å½“å‰å­—èŠ‚ä¸ºå¤šå­—èŠ‚å­—ç¬¦çš„ç¬¬äºŒä¸ªå­—èŠ‚ã€‚10ä¹‹åŽçš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆ6ä¸ªbitï¼‰å’Œä¹‹å‰çš„éƒ¨åˆ†ä¸€åŒç»„æˆåœ¨Unicodeä¸­çš„åºå·ã€‚&lt;/em&gt;&lt;/li&gt;&lt;/p&gt;

&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œå‰é¢æˆ‘ä»¬æåˆ°äº†â€œæ¬¢â€å­—çš„Unicodeæ˜¯0x6B22ï¼ŒæŒ‰ç…§ä»¥ä¸Šçš„è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡å…¶Unicodeå¾—åˆ°ç›¸åº”çš„UTF-8 encodingã€‚&lt;/p&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align: center&quot;&gt;â€œæ¬¢â€&lt;/th&gt;
&lt;th style=&quot;text-align: center&quot;&gt;Binary Stream&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: center&quot;&gt;Unicode&lt;/td&gt;
&lt;td style=&quot;text-align: center&quot;&gt;0110 1010 0010 0010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: center&quot;&gt;UTF-8&lt;/td&gt;
&lt;td style=&quot;text-align: center&quot;&gt;1110 0110 1010 1000 1010 0010&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;hr&gt;

&lt;h4 id=&quot;5-ä¹±ç åŽŸç”±&quot;&gt;5.ä¹±ç åŽŸç”±&lt;/h4&gt;

&lt;p&gt;åœ¨å®žé™…ç¼–ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå‡ºçŽ°ä¹±ç çš„çŽ°è±¡ã€‚å½“æˆ‘ä»¬ç†æ¸…äº†å­—ç¬¦é›†ã€å­—ç¬¦ç¼–ç è¿™äº›æ¦‚å¿µåŽï¼Œä¾¿çŸ¥é“å…¶æ ¹æœ¬åŽŸå› å°±æ˜¯ï¼Œæˆ‘ä»¬é”™ç”¨æŸç§å­—ç¬¦ç¼–ç åŽ»decodeå¦å¤–ä¸€ç§å­—ç¬¦ç¼–ç ï¼Œæœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ï¼ŒæŠŠä¸€ä¸ªUTF-8ç¼–ç åŽçš„å­—ç¬¦ï¼Œç”¨GBKåŽ»è§£ç ï¼Œ
è¿™æ ·ï¼Œå¸¸å¸¸å°±ä¼šå‡ºçŽ°ä¸€äº›æ— æ³•ç†è§£çš„ç¬¦å·æˆ–è€…å…¶ä»–ç¦»å¥‡çš„æ±‰å­—ï¼Œä»¥æ¬¢å­—ä¸ºä¾‹ï¼Œå…¶utf-8çš„ç¼–ç çš„äºŒè¿›åˆ¶æµæ˜¯&lt;emcode&gt;â€œ1110 0110 1010 1000 1010 0010â€&lt;/emcode&gt;ï¼Œè‹¥ç”¨gbkæ¥è§£ç ï¼Œåˆ™ä¼šå¾—åˆ°&lt;emcode&gt;â€œå¦¯  â€&lt;/emcode&gt;ï¼Œç©¶å…¶åŽŸå› æ˜¯ï¼Œå‰é¢çš„ä¸¤ä¸ªå­—èŠ‚&lt;emcode&gt;â€œE6(1110 0110) A8(1010 1000)â€&lt;/emcode&gt; æ°å¯¹åº”â€œå¦¯â€å­—ï¼Œè€Œä½™ä¸‹çš„ä¸€ä¸ªå­—èŠ‚ï¼Œå› ä¸ºä¸æ˜¯æ±‰å­—ï¼Œä¼šè¢«è§£ç æˆæŸç§ç¬¦å·ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¬¢å­çš„utf8ç¼–ç åœ¨gbkä¸‹å°±ä¼šè¢«
é”™è¯¯è§£ç æˆï¼Œâ€œå¦¯â€å’Œä¸€ä¸ªç‰¹æ®Šç¬¦å·ï¼ŒäºŽæ˜¯æˆä¸ºäº†ä¹±ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://cenalulu.github.io/linux/character-encoding/&quot;&gt;http://cenalulu.github.io/linux/character-encoding/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;æœ¬æ–‡å°†é˜è¿°å­—ç¬¦é›†ï¼ˆCharSetï¼‰ã€å­—ç¬¦ç¼–ç (Encoding)ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠæµ…è°ˆé›†ä¸­å¸¸ç”¨çš„ä¸­æ–‡å­—ç¬¦é›†å’Œç¼–ç &lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
        <pubDate>Wed, 16 Sep 2015 04:24:58 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/Encoding-and-CharSets/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/Encoding-and-CharSets/</guid>
        
        
        <category>encoding</category>
        
      </item>
      
    
      
      <item>
        <title>JavaFX Concurrency</title>
        <description>&lt;h4 id=&quot;java-differences-between-platform-runlater-amp-task-serivce-in-javafx&quot;&gt;[Java] Differences between Platform.runlater() &amp;amp; Task/Serivce in JavaFx&lt;/h4&gt;

&lt;hr&gt;

&lt;blockquote&gt;
&lt;p&gt;Repost from: &lt;a href=&quot;http://stackoverflow.com/questions/13784333/platform-runlater-and-task-javafx&quot;&gt;http://stackoverflow.com/questions/13784333/platform-runlater-and-task-javafx&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Use Platform.runLater(...) for quick and simple operations and Task for complex and big operations .&lt;/p&gt;

&lt;p&gt;Use case for Platform.runLater(...)
Use case for Task: Task Example in Ensemble App
Example: Why Can&amp;#39;t we use Platform.runLater(...) for long calculations (Taken from below reference).&lt;/p&gt;

&lt;p&gt;Problem: Background thread which just counts from 0 to 1 million and update progress bar in UI.&lt;/p&gt;

&lt;p&gt;&lt;li&gt;Code using Platform.runLater(...):&lt;/li&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProgressBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ProgressBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;counter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Platform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;runLater&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1000000.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a hideous hunk of code, a crime against nature (and programming in general). First, youâ€™ll lose brain cells just looking at this double nesting of Runnables. Second, it is going to swamp the event queue with little Runnables â€” a million of them in fact. Clearly, we needed some API to make it easier to write background workers which then communicate back with the UI.&lt;/p&gt;

&lt;p&gt;&lt;li&gt;Code using Task :&lt;/li&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;updateProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ProgressBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ProgressBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;progressProperty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;progressProperty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;it suffers from none of the flaws exhibited in the previous code&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Reference&lt;/em&gt;&lt;/strong&gt; : &lt;a href=&quot;http://fxexperience.com/2011/07/worker-threading-in-javafx-2-0/&quot;&gt;Worker Threading in JavaFX 2.0&lt;/a&gt;&lt;/p&gt;
</description>
        
          <description>&lt;h4 id=&quot;java-differences-between-platform-runlater-amp-task-serivce-in-javafx&quot;&gt;[Java] Differences between Platform.runlater() &amp;amp; Task/Serivce in JavaFx&lt;/h4&gt;

&lt;hr&gt;
</description>
        
        <pubDate>Sun, 30 Aug 2015 04:15:58 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/JavaFX-Concurrency/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/JavaFX-Concurrency/</guid>
        
        
        <category>java</category>
        
      </item>
      
    
      
      <item>
        <title>Java Comparator</title>
        <description>&lt;h4 id=&quot;java-sort-a-list&quot;&gt;[Java] Sort a List&lt;/h4&gt;

&lt;hr&gt;

&lt;p&gt;In a project, I have to retrieved amounts of data with the following table structure.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;  &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//Primary key&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But each time, the data retrieved are not in numerical order. In order to maintain an ascending ordering to show in the UI, a comparator is needed.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s say we have a list Entity and want to sort by its id.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;    &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entityList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getEntityList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entityList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;comparator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
          &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
          &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For a descending order, just change the position o1 and o2.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Parameters: &lt;strong&gt;&lt;em&gt;o1&lt;/em&gt;&lt;/strong&gt; - the first object to be compared.
&lt;strong&gt;&lt;em&gt;o2&lt;/em&gt;&lt;/strong&gt; - the second object to be compared.&lt;/p&gt;

&lt;p&gt;Returns:
a negative integer, zero, or a positive integer as the first argument is less than, equal to, or greater than the second.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Reference&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html&quot;&gt;https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        
          <description>&lt;h4 id=&quot;java-sort-a-list&quot;&gt;[Java] Sort a List&lt;/h4&gt;

&lt;hr&gt;
</description>
        
        <pubDate>Sat, 29 Aug 2015 07:24:58 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/java-comparable/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/java-comparable/</guid>
        
        
        <category>java</category>
        
      </item>
      
    
      
      <item>
        <title>Maven Client too old to build</title>
        <description>&lt;h4 id=&quot;maven-update-svn-version&quot;&gt;[maven] Update SVN version&lt;/h4&gt;

&lt;hr&gt;

&lt;p&gt;In the .pom.xml file,  find the following plugin in.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;groupId&amp;gt; com.google.code.maven-svn-revision-number-plugin&amp;lt;/groupId&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Add the following dependency, which upgrade the svn version to 1.8 (my current version)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.tmatesoft.svnkit&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;svnkit&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.8.10&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        
          <description>&lt;h4 id=&quot;maven-update-svn-version&quot;&gt;[maven] Update SVN version&lt;/h4&gt;

&lt;hr&gt;
</description>
        
        <pubDate>Thu, 20 Aug 2015 07:24:58 +0800</pubDate>
        <link>http://kelvinleong.github.io/kelvinleong/blog/mvn-client/</link>
        <guid isPermaLink="true">http://kelvinleong.github.io/kelvinleong/blog/mvn-client/</guid>
        
        
        <category>java</category>
        
      </item>
      
    
  </channel>
</rss>
